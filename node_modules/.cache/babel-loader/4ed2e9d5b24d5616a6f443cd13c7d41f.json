{"ast":null,"code":"import _slicedToArray from \"C:\\\\CAMP\\\\Trilha Front\\\\Projeto\\\\Ioasys\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\CAMP\\\\Trilha Front\\\\Projeto\\\\Ioasys\\\\src\\\\routes.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Route, Switch, Router } from \"react-router-dom\";\nimport Main from \"./Components/Pages/Main\";\nimport Login from \"./Components/Pages/Login\";\nimport Signup from \"./Components/Pages/Signup\";\nimport Perfil from \"./Components/Pages/Perfil\";\nimport Editar from \"./Components/Pages/Editar\";\nimport Contato from \"./Components/Pages/Contato\";\nimport Sobre from \"./Components/Pages/Sobre\";\nimport store from \"./store\";\nimport { Provider } from \"react-redux\";\nimport axios from \"axios\";\nimport { createBrowserHistory } from \"history\";\nconst history = createBrowserHistory({\n  basename: \"/\"\n});\nwindow.redirect = history.push;\nexport default function Routes() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        courses = _useState2[0],\n        setCourses = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        subjects = _useState4[0],\n        setSubjects = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        usuario = _useState6[0],\n        setUsuario = _useState6[1]; // const [token, setToken] = useState([]);\n  // const [redirect, setRedirect] = useState(false);\n\n\n  useEffect(() => {\n    axios.get(`https://api-edu.herokuapp.com/courses?size=200`).then(res => {\n      setCourses(res.data);\n    }); // axios\n    //   .get(\n    //     `https://api-edu.herokuapp.com/subjects?course=5e2c694d02d79a14ca44de2e&size=150`\n    //   )\n    //   .then(res => {\n    //     setSubjects(res.data);\n    //   });\n  }, []);\n\n  const handleSignIn = values => {\n    axios.post(`https://api-edu.herokuapp.com/login`, {\n      email: values.email,\n      password: values.password\n    }).then(res => {\n      setUsuario(res.data.user.student);\n      localStorage.setItem(\"token\", res.data.token);\n      console.log(res.data.user.student);\n      localStorage.setItem(\"id\", res.data.user.student._id);\n      history.push(\"/perfil\");\n    });\n  };\n\n  const requestToken = () => {\n    const AuthToken = localStorage.getItem(\"token\");\n    const USER_TOKEN = \"Bearer \".concat(AuthToken);\n    const URL = `https://api-edu.herokuapp.com/students/${localStorage.getItem(\"id\")}`;\n    axios.get(URL, {\n      headers: {\n        Authorization: USER_TOKEN\n      }\n    }).then(res => {\n      if (res.data.active) {\n        setUsuario(res.data);\n        history.push(\"/perfil\");\n      } else {\n        window.location.reload();\n      }\n    });\n  };\n\n  const Submit = values => {\n    // console.log(localStorage.getItem(\"courses\"))\n    //console.log(values.course.value);\n    let check = false;\n\n    if (values.monitor) {\n      check = true;\n    } else {\n      check = false;\n    }\n\n    if (values.senha === values.senhaConfirma && check && values.cursos != undefined && values.genero != undefined) {\n      axios.post(`http://api-edu.herokuapp.com/register`, {\n        name: values.nome,\n        course: values.cursos.value,\n        gender: values.genero.value,\n        phone: values.telefone,\n        email: values.email,\n        password: values.senha,\n        subject: values.materias.value,\n        isHelper: check\n      }).then(res => {\n        //console.log(res);\n        const USER_TOKEN = \"Bearer \".concat(res.data.token);\n\n        if (check) {\n          let subjects = values.materias.map(subjects => subjects.value);\n          axios.post(`http://api-edu.herokuapp.com/helpers`, {\n            subjects: subjects\n          }, {\n            headers: {\n              Authorization: USER_TOKEN\n            }\n          }).then(res => {\n            console.log(res);\n          });\n        }\n\n        alert(\"Dados cadastrados com sucesso!\");\n        window.location.reload();\n      });\n    } else if (values.senha === values.senhaConfirma && !check(values.cursos != undefined) && values.genero != undefined) {\n      axios.post(`http://api-edu.herokuapp.com/register`, {\n        name: values.nome,\n        course: values.cursos.value,\n        gender: values.genero.value,\n        phone: values.telefone,\n        email: values.email,\n        password: values.senha,\n        isHelper: check\n      }).then(res => {\n        //console.log(res);\n        const USER_TOKEN = \"Bearer \".concat(res.data.token);\n\n        if (check) {\n          let subjects = values.materias.map(subjects => subjects.value);\n          axios.post(`http://api-edu.herokuapp.com/helpers`, {\n            subjects: subjects\n          }, {\n            headers: {\n              Authorization: USER_TOKEN\n            }\n          }).then(res => {\n            console.log(res);\n          });\n        }\n\n        alert(\"Dados cadastrados com sucesso!\");\n        window.location.reload();\n      });\n    } else {\n      alert(\"Dados incorretos\");\n    }\n\n    localStorage.setItem(\"curses\", []);\n    console.log(values);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(Provider, {\n    store: store,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(Router, {\n    history: history,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: Main,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/login\",\n    component: () => React.createElement(Login, {\n      onSubmit: handleSignIn,\n      requestToken: requestToken,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/register\",\n    component: () => React.createElement(Signup, {\n      onSubmit: Submit,\n      cursos: courses,\n      materias: subjects,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/contact\",\n    component: () => React.createElement(Contato, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/editar\",\n    component: () => React.createElement(Editar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/sobre\",\n    component: () => React.createElement(Sobre, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/perfil\",\n    component: () => React.createElement(Perfil, {\n      usuario: usuario,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  })))));\n}","map":{"version":3,"sources":["C:/CAMP/Trilha Front/Projeto/Ioasys/src/routes.js"],"names":["React","useState","useEffect","Route","Switch","Router","Main","Login","Signup","Perfil","Editar","Contato","Sobre","store","Provider","axios","createBrowserHistory","history","basename","window","redirect","push","Routes","courses","setCourses","subjects","setSubjects","usuario","setUsuario","get","then","res","data","handleSignIn","values","post","email","password","user","student","localStorage","setItem","token","console","log","_id","requestToken","AuthToken","getItem","USER_TOKEN","concat","URL","headers","Authorization","active","location","reload","Submit","check","monitor","senha","senhaConfirma","cursos","undefined","genero","name","nome","course","value","gender","phone","telefone","subject","materias","isHelper","map","alert"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Route, Switch, Router } from \"react-router-dom\";\r\nimport Main from \"./Components/Pages/Main\";\r\nimport Login from \"./Components/Pages/Login\";\r\nimport Signup from \"./Components/Pages/Signup\";\r\nimport Perfil from \"./Components/Pages/Perfil\";\r\nimport Editar from \"./Components/Pages/Editar\";\r\nimport Contato from \"./Components/Pages/Contato\";\r\nimport Sobre from \"./Components/Pages/Sobre\";\r\nimport store from \"./store\";\r\nimport { Provider } from \"react-redux\";\r\nimport axios from \"axios\";\r\n\r\nimport { createBrowserHistory } from \"history\";\r\nconst history = createBrowserHistory({\r\n  basename: \"/\"\r\n});\r\nwindow.redirect = history.push;\r\n\r\nexport default function Routes() {\r\n  const [courses, setCourses] = useState([]);\r\n  const [subjects, setSubjects] = useState([]);\r\n  const [usuario, setUsuario] = useState([]);\r\n  // const [token, setToken] = useState([]);\r\n  // const [redirect, setRedirect] = useState(false);\r\n\r\n  useEffect(() => {\r\n    axios.get(`https://api-edu.herokuapp.com/courses?size=200`).then(res => {\r\n      setCourses(res.data);\r\n    });\r\n    // axios\r\n    //   .get(\r\n    //     `https://api-edu.herokuapp.com/subjects?course=5e2c694d02d79a14ca44de2e&size=150`\r\n    //   )\r\n    //   .then(res => {\r\n    //     setSubjects(res.data);\r\n    //   });\r\n  }, []);\r\n\r\n  const handleSignIn = values => {\r\n    axios\r\n      .post(`https://api-edu.herokuapp.com/login`, {\r\n        email: values.email,\r\n        password: values.password\r\n      })\r\n      .then(res => {\r\n        setUsuario(res.data.user.student);\r\n        localStorage.setItem(\"token\", res.data.token);\r\n        console.log(res.data.user.student);\r\n        localStorage.setItem(\"id\", res.data.user.student._id);\r\n\r\n        history.push(\"/perfil\");\r\n      });\r\n  };\r\n\r\n  const requestToken = () => {\r\n    const AuthToken = localStorage.getItem(\"token\");\r\n    const USER_TOKEN = \"Bearer \".concat(AuthToken);\r\n    const URL = `https://api-edu.herokuapp.com/students/${localStorage.getItem(\r\n      \"id\"\r\n    )}`;\r\n    axios.get(URL, { headers: { Authorization: USER_TOKEN } }).then(res => {\r\n      if (res.data.active) {\r\n        setUsuario(res.data);\r\n        history.push(\"/perfil\");\r\n      } else {\r\n        window.location.reload();\r\n      }\r\n    });\r\n  };\r\n\r\n  const Submit = values => {\r\n    // console.log(localStorage.getItem(\"courses\"))\r\n    //console.log(values.course.value);\r\n    let check = false;\r\n    if (values.monitor) {\r\n      check = true;\r\n    } else {\r\n      check = false;\r\n    }\r\n    if (values.senha === values.senhaConfirma && check && (values.cursos != undefined) && (values.genero != undefined)) {\r\n      axios\r\n        .post(`http://api-edu.herokuapp.com/register`, {\r\n          name: values.nome,\r\n          course: values.cursos.value,\r\n          gender: values.genero.value,\r\n          phone: values.telefone,\r\n          email: values.email,\r\n          password: values.senha,\r\n          subject: values.materias.value,\r\n          isHelper: check\r\n        })\r\n        .then(res => {\r\n          //console.log(res);\r\n          const USER_TOKEN = \"Bearer \".concat(res.data.token);\r\n\r\n          if (check) {\r\n            let subjects = values.materias.map(subjects => subjects.value);\r\n            axios\r\n              .post(\r\n                `http://api-edu.herokuapp.com/helpers`,\r\n                {\r\n                  subjects: subjects\r\n                },\r\n                { headers: { Authorization: USER_TOKEN } }\r\n              )\r\n              .then(res => {\r\n                console.log(res);\r\n              });\r\n          }\r\n          alert(\"Dados cadastrados com sucesso!\");\r\n          window.location.reload();\r\n        });\r\n    } else if (values.senha === values.senhaConfirma && !check (values.cursos != undefined) && (values.genero != undefined)) {\r\n        axios\r\n          .post(`http://api-edu.herokuapp.com/register`, {\r\n            name: values.nome,\r\n            course: values.cursos.value,\r\n            gender: values.genero.value,\r\n            phone: values.telefone,\r\n            email: values.email,\r\n            password: values.senha,\r\n            isHelper: check\r\n          })\r\n          .then(res => {\r\n            //console.log(res);\r\n            const USER_TOKEN = \"Bearer \".concat(res.data.token);\r\n  \r\n            if (check) {\r\n              let subjects = values.materias.map(subjects => subjects.value);\r\n              axios\r\n                .post(\r\n                  `http://api-edu.herokuapp.com/helpers`,\r\n                  {\r\n                    subjects: subjects\r\n                  },\r\n                  { headers: { Authorization: USER_TOKEN } }\r\n                )\r\n                .then(res => {\r\n                  console.log(res);\r\n                });\r\n            }\r\n            alert(\"Dados cadastrados com sucesso!\");\r\n            window.location.reload();\r\n          });\r\n    } else {\r\n      alert(\"Dados incorretos\");\r\n    }\r\n\r\n    localStorage.setItem(\"curses\", []);\r\n    console.log(values);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Provider store={store}>\r\n        <Router history={history}>\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Main} />\r\n            <Route\r\n              path=\"/login\"\r\n              component={() => (\r\n                <Login onSubmit={handleSignIn} requestToken={requestToken} />\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"/register\"\r\n              component={() => (\r\n                <Signup\r\n                  onSubmit={Submit}\r\n                  cursos={courses}\r\n                  materias={subjects}\r\n                />\r\n              )}\r\n            />\r\n            <Route path=\"/contact\" component={() => <Contato />} />\r\n            <Route path=\"/editar\" component={() => <Editar />} />\r\n            <Route path=\"/sobre\" component={() => <Sobre />} />\r\n            <Route\r\n              path=\"/perfil\"\r\n              component={() => <Perfil usuario={usuario} />}\r\n            />\r\n          </Switch>\r\n        </Router>\r\n      </Provider>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}